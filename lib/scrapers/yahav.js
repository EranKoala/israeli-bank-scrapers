"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _moment = _interopRequireDefault(require("moment"));
var _constants = require("../constants");
var _elementsInteractions = require("../helpers/elements-interactions");
var _navigation = require("../helpers/navigation");
var _transactions = require("../transactions");
var _baseScraperWithBrowser = require("./base-scraper-with-browser");
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
const LOGIN_URL = 'https://login.yahav.co.il/login/';
const BASE_URL = 'https://digital.yahav.co.il/BaNCSDigitalUI/app/index.html#/';
const INVALID_DETAILS_SELECTOR = '.ui-dialog-buttons';
const CHANGE_PASSWORD_OLD_PASS = 'input#ef_req_parameter_old_credential';
const BASE_WELCOME_URL = `${BASE_URL}main/home`;
const ACCOUNT_ID_SELECTOR = 'span.portfolio-value[ng-if="mainController.data.portfolioList.length === 1"]';
const ACCOUNT_DETAILS_SELECTOR = '.account-details';
const DATE_FORMAT = 'DD/MM/YYYY';
const USER_ELEM = '#username';
const PASSWD_ELEM = '#password';
const NATIONALID_ELEM = '#pinno';
const SUBMIT_LOGIN_SELECTOR = '.btn';
function getPossibleLoginResults(page) {
  // checkout file `base-scraper-with-browser.ts` for available result types
  const urls = {};
  urls[_baseScraperWithBrowser.LoginResults.Success] = [`${BASE_WELCOME_URL}`];
  urls[_baseScraperWithBrowser.LoginResults.InvalidPassword] = [async () => {
    return (0, _elementsInteractions.elementPresentOnPage)(page, `${INVALID_DETAILS_SELECTOR}`);
  }];
  urls[_baseScraperWithBrowser.LoginResults.ChangePassword] = [async () => {
    return (0, _elementsInteractions.elementPresentOnPage)(page, `${CHANGE_PASSWORD_OLD_PASS}`);
  }];
  return urls;
}
async function getAccountID(page) {
  try {
    const selectedSnifAccount = await page.$eval(ACCOUNT_ID_SELECTOR, element => {
      return element.textContent;
    });
    return selectedSnifAccount;
  } catch (error) {
    const errorMessage = error instanceof Error ? error.message : String(error);
    throw new Error(`Failed to retrieve account ID. Possible outdated selector '${ACCOUNT_ID_SELECTOR}: ${errorMessage}`);
  }
}
function getAmountData(amountStr) {
  const amountStrCopy = amountStr.replace(',', '');
  return parseFloat(amountStrCopy);
}
function getTxnAmount(txn) {
  const credit = getAmountData(txn.credit);
  const debit = getAmountData(txn.debit);
  return (Number.isNaN(credit) ? 0 : credit) - (Number.isNaN(debit) ? 0 : debit);
}
function convertTransactions(txns) {
  return txns.map(txn => {
    const convertedDate = (0, _moment.default)(txn.date, DATE_FORMAT).toISOString();
    const convertedAmount = getTxnAmount(txn);
    return {
      type: _transactions.TransactionTypes.Normal,
      identifier: txn.reference ? parseInt(txn.reference, 10) : undefined,
      date: convertedDate,
      processedDate: convertedDate,
      originalAmount: convertedAmount,
      originalCurrency: _constants.SHEKEL_CURRENCY,
      chargedAmount: convertedAmount,
      status: txn.status,
      description: txn.description,
      memo: txn.memo
    };
  });
}
function handleTransactionRow(txns, txnRow) {
  const div = txnRow.innerDivs;

  // Remove anything except digits.
  const regex = /\D+/gm;
  const tx = {
    date: div[1],
    reference: div[2].replace(regex, ''),
    memo: '',
    description: div[3],
    debit: div[4],
    credit: div[5],
    status: _transactions.TransactionStatuses.Completed
  };
  txns.push(tx);
}
async function getAccountTransactions(page) {
  // Wait for transactions.
  await (0, _elementsInteractions.waitUntilElementFound)(page, '.under-line-txn-table-header', true);
  const txns = [];
  const transactionsDivs = await (0, _elementsInteractions.pageEvalAll)(page, '.list-item-holder .entire-content-ctr', [], divs => {
    return divs.map(div => ({
      id: div.getAttribute('id') || '',
      innerDivs: Array.from(div.getElementsByTagName('div')).map(el => el.innerText)
    }));
  });
  for (const txnRow of transactionsDivs) {
    handleTransactionRow(txns, txnRow);
  }
  return convertTransactions(txns);
}

// Manipulate the calendar drop down to choose the txs start date.
async function searchByDates(page, startDate) {
  // Get the day number from startDate. 1-31 (usually 1)
  const startDateDay = startDate.format('D');
  const startDateMonth = startDate.format('M');
  const startDateYear = startDate.format('Y');

  // Open the calendar date picker
  const dateFromPick = 'div.date-options-cell:nth-child(7) > date-picker:nth-child(1) > div:nth-child(1) > span:nth-child(2)';
  await (0, _elementsInteractions.waitUntilElementFound)(page, dateFromPick, true);
  await (0, _elementsInteractions.clickButton)(page, dateFromPick);

  // Wait until first day appear.
  await (0, _elementsInteractions.waitUntilElementFound)(page, '.pmu-days > div:nth-child(1)', true);

  // Open Months options.
  const monthFromPick = '.pmu-month';
  await (0, _elementsInteractions.waitUntilElementFound)(page, monthFromPick, true);
  await (0, _elementsInteractions.clickButton)(page, monthFromPick);
  await (0, _elementsInteractions.waitUntilElementFound)(page, '.pmu-months > div:nth-child(1)', true);

  // Open Year options.
  // Use same selector... Yahav knows why...
  await (0, _elementsInteractions.waitUntilElementFound)(page, monthFromPick, true);
  await (0, _elementsInteractions.clickButton)(page, monthFromPick);
  await (0, _elementsInteractions.waitUntilElementFound)(page, '.pmu-years > div:nth-child(1)', true);

  // Select year from a 12 year grid.
  for (let i = 1; i < 13; i += 1) {
    const selector = `.pmu-years > div:nth-child(${i})`;
    const year = await page.$eval(selector, y => {
      return y.innerText;
    });
    if (startDateYear === year) {
      await (0, _elementsInteractions.clickButton)(page, selector);
      break;
    }
  }

  // Select Month.
  await (0, _elementsInteractions.waitUntilElementFound)(page, '.pmu-months > div:nth-child(1)', true);
  // The first element (1) is January.
  const monthSelector = `.pmu-months > div:nth-child(${startDateMonth})`;
  await (0, _elementsInteractions.clickButton)(page, monthSelector);

  // Select Day.
  // The calendar grid shows 7 days and 6 weeks = 42 days.
  // In theory, the first day of the month will be in the first row.
  // Let's check everything just in case...
  for (let i = 1; i < 42; i += 1) {
    const selector = `.pmu-days > div:nth-child(${i})`;
    const day = await page.$eval(selector, d => {
      return d.innerText;
    });
    if (startDateDay === day) {
      await (0, _elementsInteractions.clickButton)(page, selector);
      break;
    }
  }
}
async function fetchAccountData(page, startDate, accountID) {
  await (0, _elementsInteractions.waitUntilElementDisappear)(page, '.loading-bar-spinner');
  await searchByDates(page, startDate);
  await (0, _elementsInteractions.waitUntilElementDisappear)(page, '.loading-bar-spinner');
  const txns = await getAccountTransactions(page);
  return {
    accountNumber: accountID,
    txns
  };
}
async function fetchAccounts(page, startDate) {
  const accounts = [];

  // TODO: get more accounts. Not sure is supported.
  const accountID = await getAccountID(page);
  const accountData = await fetchAccountData(page, startDate, accountID);
  accounts.push(accountData);
  return accounts;
}
async function waitReadinessForAll(page) {
  await (0, _elementsInteractions.waitUntilElementFound)(page, `${USER_ELEM}`, true);
  await (0, _elementsInteractions.waitUntilElementFound)(page, `${PASSWD_ELEM}`, true);
  await (0, _elementsInteractions.waitUntilElementFound)(page, `${NATIONALID_ELEM}`, true);
  await (0, _elementsInteractions.waitUntilElementFound)(page, `${SUBMIT_LOGIN_SELECTOR}`, true);
}
async function redirectOrDialog(page) {
  // Click on bank messages if any.
  await (0, _navigation.waitForNavigation)(page);
  await (0, _elementsInteractions.waitUntilElementDisappear)(page, '.loading-bar-spinner');
  const hasMessage = await (0, _elementsInteractions.elementPresentOnPage)(page, '.messaging-links-container');
  if (hasMessage) {
    await (0, _elementsInteractions.clickButton)(page, '.link-1');
  }
  const promise1 = page.waitForSelector(ACCOUNT_DETAILS_SELECTOR, {
    timeout: 30000
  });
  const promise2 = page.waitForSelector(CHANGE_PASSWORD_OLD_PASS, {
    timeout: 30000
  });
  const promises = [promise1, promise2];
  await Promise.race(promises);
  await (0, _elementsInteractions.waitUntilElementDisappear)(page, '.loading-bar-spinner');
}
class YahavScraper extends _baseScraperWithBrowser.BaseScraperWithBrowser {
  getLoginOptions(credentials) {
    return {
      loginUrl: `${LOGIN_URL}`,
      fields: [{
        selector: `${USER_ELEM}`,
        value: credentials.username
      }, {
        selector: `${PASSWD_ELEM}`,
        value: credentials.password
      }, {
        selector: `${NATIONALID_ELEM}`,
        value: credentials.nationalID
      }],
      submitButtonSelector: `${SUBMIT_LOGIN_SELECTOR}`,
      checkReadiness: async () => waitReadinessForAll(this.page),
      postAction: async () => redirectOrDialog(this.page),
      possibleResults: getPossibleLoginResults(this.page)
    };
  }
  async fetchData() {
    // Goto statements page
    await (0, _elementsInteractions.waitUntilElementFound)(this.page, ACCOUNT_DETAILS_SELECTOR, true);
    await (0, _elementsInteractions.clickButton)(this.page, ACCOUNT_DETAILS_SELECTOR);
    await (0, _elementsInteractions.waitUntilElementFound)(this.page, '.statement-options .selected-item-top', true);
    const defaultStartMoment = (0, _moment.default)().subtract(3, 'months').add(1, 'day');
    const startDate = this.options.startDate || defaultStartMoment.toDate();
    const startMoment = _moment.default.max(defaultStartMoment, (0, _moment.default)(startDate));
    const accounts = await fetchAccounts(this.page, startMoment);
    return {
      success: true,
      accounts
    };
  }
}
var _default = exports.default = YahavScraper;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9tZW50IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfY29uc3RhbnRzIiwiX2VsZW1lbnRzSW50ZXJhY3Rpb25zIiwiX25hdmlnYXRpb24iLCJfdHJhbnNhY3Rpb25zIiwiX2Jhc2VTY3JhcGVyV2l0aEJyb3dzZXIiLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJMT0dJTl9VUkwiLCJCQVNFX1VSTCIsIklOVkFMSURfREVUQUlMU19TRUxFQ1RPUiIsIkNIQU5HRV9QQVNTV09SRF9PTERfUEFTUyIsIkJBU0VfV0VMQ09NRV9VUkwiLCJBQ0NPVU5UX0lEX1NFTEVDVE9SIiwiQUNDT1VOVF9ERVRBSUxTX1NFTEVDVE9SIiwiREFURV9GT1JNQVQiLCJVU0VSX0VMRU0iLCJQQVNTV0RfRUxFTSIsIk5BVElPTkFMSURfRUxFTSIsIlNVQk1JVF9MT0dJTl9TRUxFQ1RPUiIsImdldFBvc3NpYmxlTG9naW5SZXN1bHRzIiwicGFnZSIsInVybHMiLCJMb2dpblJlc3VsdHMiLCJTdWNjZXNzIiwiSW52YWxpZFBhc3N3b3JkIiwiZWxlbWVudFByZXNlbnRPblBhZ2UiLCJDaGFuZ2VQYXNzd29yZCIsImdldEFjY291bnRJRCIsInNlbGVjdGVkU25pZkFjY291bnQiLCIkZXZhbCIsImVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsImVycm9yIiwiZXJyb3JNZXNzYWdlIiwiRXJyb3IiLCJtZXNzYWdlIiwiU3RyaW5nIiwiZ2V0QW1vdW50RGF0YSIsImFtb3VudFN0ciIsImFtb3VudFN0ckNvcHkiLCJyZXBsYWNlIiwicGFyc2VGbG9hdCIsImdldFR4bkFtb3VudCIsInR4biIsImNyZWRpdCIsImRlYml0IiwiTnVtYmVyIiwiaXNOYU4iLCJjb252ZXJ0VHJhbnNhY3Rpb25zIiwidHhucyIsIm1hcCIsImNvbnZlcnRlZERhdGUiLCJtb21lbnQiLCJkYXRlIiwidG9JU09TdHJpbmciLCJjb252ZXJ0ZWRBbW91bnQiLCJ0eXBlIiwiVHJhbnNhY3Rpb25UeXBlcyIsIk5vcm1hbCIsImlkZW50aWZpZXIiLCJyZWZlcmVuY2UiLCJwYXJzZUludCIsInVuZGVmaW5lZCIsInByb2Nlc3NlZERhdGUiLCJvcmlnaW5hbEFtb3VudCIsIm9yaWdpbmFsQ3VycmVuY3kiLCJTSEVLRUxfQ1VSUkVOQ1kiLCJjaGFyZ2VkQW1vdW50Iiwic3RhdHVzIiwiZGVzY3JpcHRpb24iLCJtZW1vIiwiaGFuZGxlVHJhbnNhY3Rpb25Sb3ciLCJ0eG5Sb3ciLCJkaXYiLCJpbm5lckRpdnMiLCJyZWdleCIsInR4IiwiVHJhbnNhY3Rpb25TdGF0dXNlcyIsIkNvbXBsZXRlZCIsInB1c2giLCJnZXRBY2NvdW50VHJhbnNhY3Rpb25zIiwid2FpdFVudGlsRWxlbWVudEZvdW5kIiwidHJhbnNhY3Rpb25zRGl2cyIsInBhZ2VFdmFsQWxsIiwiZGl2cyIsImlkIiwiZ2V0QXR0cmlidXRlIiwiQXJyYXkiLCJmcm9tIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJlbCIsImlubmVyVGV4dCIsInNlYXJjaEJ5RGF0ZXMiLCJzdGFydERhdGUiLCJzdGFydERhdGVEYXkiLCJmb3JtYXQiLCJzdGFydERhdGVNb250aCIsInN0YXJ0RGF0ZVllYXIiLCJkYXRlRnJvbVBpY2siLCJjbGlja0J1dHRvbiIsIm1vbnRoRnJvbVBpY2siLCJpIiwic2VsZWN0b3IiLCJ5ZWFyIiwieSIsIm1vbnRoU2VsZWN0b3IiLCJkYXkiLCJkIiwiZmV0Y2hBY2NvdW50RGF0YSIsImFjY291bnRJRCIsIndhaXRVbnRpbEVsZW1lbnREaXNhcHBlYXIiLCJhY2NvdW50TnVtYmVyIiwiZmV0Y2hBY2NvdW50cyIsImFjY291bnRzIiwiYWNjb3VudERhdGEiLCJ3YWl0UmVhZGluZXNzRm9yQWxsIiwicmVkaXJlY3RPckRpYWxvZyIsIndhaXRGb3JOYXZpZ2F0aW9uIiwiaGFzTWVzc2FnZSIsInByb21pc2UxIiwid2FpdEZvclNlbGVjdG9yIiwidGltZW91dCIsInByb21pc2UyIiwicHJvbWlzZXMiLCJQcm9taXNlIiwicmFjZSIsIllhaGF2U2NyYXBlciIsIkJhc2VTY3JhcGVyV2l0aEJyb3dzZXIiLCJnZXRMb2dpbk9wdGlvbnMiLCJjcmVkZW50aWFscyIsImxvZ2luVXJsIiwiZmllbGRzIiwidmFsdWUiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwibmF0aW9uYWxJRCIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiY2hlY2tSZWFkaW5lc3MiLCJwb3N0QWN0aW9uIiwicG9zc2libGVSZXN1bHRzIiwiZmV0Y2hEYXRhIiwiZGVmYXVsdFN0YXJ0TW9tZW50Iiwic3VidHJhY3QiLCJhZGQiLCJvcHRpb25zIiwidG9EYXRlIiwic3RhcnRNb21lbnQiLCJtYXgiLCJzdWNjZXNzIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiLi4vLi4vc3JjL3NjcmFwZXJzL3lhaGF2LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb21lbnQsIHsgdHlwZSBNb21lbnQgfSBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyB0eXBlIFBhZ2UgfSBmcm9tICdwdXBwZXRlZXInO1xyXG5pbXBvcnQgeyBTSEVLRUxfQ1VSUkVOQ1kgfSBmcm9tICcuLi9jb25zdGFudHMnO1xyXG5pbXBvcnQge1xyXG4gIGNsaWNrQnV0dG9uLFxyXG4gIGVsZW1lbnRQcmVzZW50T25QYWdlLFxyXG4gIHBhZ2VFdmFsQWxsLFxyXG4gIHdhaXRVbnRpbEVsZW1lbnREaXNhcHBlYXIsXHJcbiAgd2FpdFVudGlsRWxlbWVudEZvdW5kLFxyXG59IGZyb20gJy4uL2hlbHBlcnMvZWxlbWVudHMtaW50ZXJhY3Rpb25zJztcclxuaW1wb3J0IHsgd2FpdEZvck5hdmlnYXRpb24gfSBmcm9tICcuLi9oZWxwZXJzL25hdmlnYXRpb24nO1xyXG5pbXBvcnQgeyBUcmFuc2FjdGlvblN0YXR1c2VzLCBUcmFuc2FjdGlvblR5cGVzLCB0eXBlIFRyYW5zYWN0aW9uLCB0eXBlIFRyYW5zYWN0aW9uc0FjY291bnQgfSBmcm9tICcuLi90cmFuc2FjdGlvbnMnO1xyXG5pbXBvcnQgeyBCYXNlU2NyYXBlcldpdGhCcm93c2VyLCBMb2dpblJlc3VsdHMsIHR5cGUgUG9zc2libGVMb2dpblJlc3VsdHMgfSBmcm9tICcuL2Jhc2Utc2NyYXBlci13aXRoLWJyb3dzZXInO1xyXG5cclxuY29uc3QgTE9HSU5fVVJMID0gJ2h0dHBzOi8vbG9naW4ueWFoYXYuY28uaWwvbG9naW4vJztcclxuY29uc3QgQkFTRV9VUkwgPSAnaHR0cHM6Ly9kaWdpdGFsLnlhaGF2LmNvLmlsL0JhTkNTRGlnaXRhbFVJL2FwcC9pbmRleC5odG1sIy8nO1xyXG5jb25zdCBJTlZBTElEX0RFVEFJTFNfU0VMRUNUT1IgPSAnLnVpLWRpYWxvZy1idXR0b25zJztcclxuY29uc3QgQ0hBTkdFX1BBU1NXT1JEX09MRF9QQVNTID0gJ2lucHV0I2VmX3JlcV9wYXJhbWV0ZXJfb2xkX2NyZWRlbnRpYWwnO1xyXG5jb25zdCBCQVNFX1dFTENPTUVfVVJMID0gYCR7QkFTRV9VUkx9bWFpbi9ob21lYDtcclxuXHJcbmNvbnN0IEFDQ09VTlRfSURfU0VMRUNUT1IgPSAnc3Bhbi5wb3J0Zm9saW8tdmFsdWVbbmctaWY9XCJtYWluQ29udHJvbGxlci5kYXRhLnBvcnRmb2xpb0xpc3QubGVuZ3RoID09PSAxXCJdJztcclxuY29uc3QgQUNDT1VOVF9ERVRBSUxTX1NFTEVDVE9SID0gJy5hY2NvdW50LWRldGFpbHMnO1xyXG5jb25zdCBEQVRFX0ZPUk1BVCA9ICdERC9NTS9ZWVlZJztcclxuXHJcbmNvbnN0IFVTRVJfRUxFTSA9ICcjdXNlcm5hbWUnO1xyXG5jb25zdCBQQVNTV0RfRUxFTSA9ICcjcGFzc3dvcmQnO1xyXG5jb25zdCBOQVRJT05BTElEX0VMRU0gPSAnI3Bpbm5vJztcclxuY29uc3QgU1VCTUlUX0xPR0lOX1NFTEVDVE9SID0gJy5idG4nO1xyXG5cclxuaW50ZXJmYWNlIFNjcmFwZWRUcmFuc2FjdGlvbiB7XHJcbiAgY3JlZGl0OiBzdHJpbmc7XHJcbiAgZGViaXQ6IHN0cmluZztcclxuICBkYXRlOiBzdHJpbmc7XHJcbiAgcmVmZXJlbmNlPzogc3RyaW5nO1xyXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgbWVtbzogc3RyaW5nO1xyXG4gIHN0YXR1czogVHJhbnNhY3Rpb25TdGF0dXNlcztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UG9zc2libGVMb2dpblJlc3VsdHMocGFnZTogUGFnZSk6IFBvc3NpYmxlTG9naW5SZXN1bHRzIHtcclxuICAvLyBjaGVja291dCBmaWxlIGBiYXNlLXNjcmFwZXItd2l0aC1icm93c2VyLnRzYCBmb3IgYXZhaWxhYmxlIHJlc3VsdCB0eXBlc1xyXG4gIGNvbnN0IHVybHM6IFBvc3NpYmxlTG9naW5SZXN1bHRzID0ge307XHJcbiAgdXJsc1tMb2dpblJlc3VsdHMuU3VjY2Vzc10gPSBbYCR7QkFTRV9XRUxDT01FX1VSTH1gXTtcclxuICB1cmxzW0xvZ2luUmVzdWx0cy5JbnZhbGlkUGFzc3dvcmRdID0gW1xyXG4gICAgYXN5bmMgKCkgPT4ge1xyXG4gICAgICByZXR1cm4gZWxlbWVudFByZXNlbnRPblBhZ2UocGFnZSwgYCR7SU5WQUxJRF9ERVRBSUxTX1NFTEVDVE9SfWApO1xyXG4gICAgfSxcclxuICBdO1xyXG5cclxuICB1cmxzW0xvZ2luUmVzdWx0cy5DaGFuZ2VQYXNzd29yZF0gPSBbXHJcbiAgICBhc3luYyAoKSA9PiB7XHJcbiAgICAgIHJldHVybiBlbGVtZW50UHJlc2VudE9uUGFnZShwYWdlLCBgJHtDSEFOR0VfUEFTU1dPUkRfT0xEX1BBU1N9YCk7XHJcbiAgICB9LFxyXG4gIF07XHJcblxyXG4gIHJldHVybiB1cmxzO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBnZXRBY2NvdW50SUQocGFnZTogUGFnZSk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHNlbGVjdGVkU25pZkFjY291bnQgPSBhd2FpdCBwYWdlLiRldmFsKEFDQ09VTlRfSURfU0VMRUNUT1IsIChlbGVtZW50OiBFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiBlbGVtZW50LnRleHRDb250ZW50IGFzIHN0cmluZztcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBzZWxlY3RlZFNuaWZBY2NvdW50O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgIGBGYWlsZWQgdG8gcmV0cmlldmUgYWNjb3VudCBJRC4gUG9zc2libGUgb3V0ZGF0ZWQgc2VsZWN0b3IgJyR7QUNDT1VOVF9JRF9TRUxFQ1RPUn06ICR7ZXJyb3JNZXNzYWdlfWAsXHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0QW1vdW50RGF0YShhbW91bnRTdHI6IHN0cmluZykge1xyXG4gIGNvbnN0IGFtb3VudFN0ckNvcHkgPSBhbW91bnRTdHIucmVwbGFjZSgnLCcsICcnKTtcclxuICByZXR1cm4gcGFyc2VGbG9hdChhbW91bnRTdHJDb3B5KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VHhuQW1vdW50KHR4bjogU2NyYXBlZFRyYW5zYWN0aW9uKSB7XHJcbiAgY29uc3QgY3JlZGl0ID0gZ2V0QW1vdW50RGF0YSh0eG4uY3JlZGl0KTtcclxuICBjb25zdCBkZWJpdCA9IGdldEFtb3VudERhdGEodHhuLmRlYml0KTtcclxuICByZXR1cm4gKE51bWJlci5pc05hTihjcmVkaXQpID8gMCA6IGNyZWRpdCkgLSAoTnVtYmVyLmlzTmFOKGRlYml0KSA/IDAgOiBkZWJpdCk7XHJcbn1cclxuXHJcbnR5cGUgVHJhbnNhY3Rpb25zVHIgPSB7IGlkOiBzdHJpbmc7IGlubmVyRGl2czogc3RyaW5nW10gfTtcclxuXHJcbmZ1bmN0aW9uIGNvbnZlcnRUcmFuc2FjdGlvbnModHhuczogU2NyYXBlZFRyYW5zYWN0aW9uW10pOiBUcmFuc2FjdGlvbltdIHtcclxuICByZXR1cm4gdHhucy5tYXAodHhuID0+IHtcclxuICAgIGNvbnN0IGNvbnZlcnRlZERhdGUgPSBtb21lbnQodHhuLmRhdGUsIERBVEVfRk9STUFUKS50b0lTT1N0cmluZygpO1xyXG4gICAgY29uc3QgY29udmVydGVkQW1vdW50ID0gZ2V0VHhuQW1vdW50KHR4bik7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0eXBlOiBUcmFuc2FjdGlvblR5cGVzLk5vcm1hbCxcclxuICAgICAgaWRlbnRpZmllcjogdHhuLnJlZmVyZW5jZSA/IHBhcnNlSW50KHR4bi5yZWZlcmVuY2UsIDEwKSA6IHVuZGVmaW5lZCxcclxuICAgICAgZGF0ZTogY29udmVydGVkRGF0ZSxcclxuICAgICAgcHJvY2Vzc2VkRGF0ZTogY29udmVydGVkRGF0ZSxcclxuICAgICAgb3JpZ2luYWxBbW91bnQ6IGNvbnZlcnRlZEFtb3VudCxcclxuICAgICAgb3JpZ2luYWxDdXJyZW5jeTogU0hFS0VMX0NVUlJFTkNZLFxyXG4gICAgICBjaGFyZ2VkQW1vdW50OiBjb252ZXJ0ZWRBbW91bnQsXHJcbiAgICAgIHN0YXR1czogdHhuLnN0YXR1cyxcclxuICAgICAgZGVzY3JpcHRpb246IHR4bi5kZXNjcmlwdGlvbixcclxuICAgICAgbWVtbzogdHhuLm1lbW8sXHJcbiAgICB9O1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVUcmFuc2FjdGlvblJvdyh0eG5zOiBTY3JhcGVkVHJhbnNhY3Rpb25bXSwgdHhuUm93OiBUcmFuc2FjdGlvbnNUcikge1xyXG4gIGNvbnN0IGRpdiA9IHR4blJvdy5pbm5lckRpdnM7XHJcblxyXG4gIC8vIFJlbW92ZSBhbnl0aGluZyBleGNlcHQgZGlnaXRzLlxyXG4gIGNvbnN0IHJlZ2V4ID0gL1xcRCsvZ207XHJcblxyXG4gIGNvbnN0IHR4OiBTY3JhcGVkVHJhbnNhY3Rpb24gPSB7XHJcbiAgICBkYXRlOiBkaXZbMV0sXHJcbiAgICByZWZlcmVuY2U6IGRpdlsyXS5yZXBsYWNlKHJlZ2V4LCAnJyksXHJcbiAgICBtZW1vOiAnJyxcclxuICAgIGRlc2NyaXB0aW9uOiBkaXZbM10sXHJcbiAgICBkZWJpdDogZGl2WzRdLFxyXG4gICAgY3JlZGl0OiBkaXZbNV0sXHJcbiAgICBzdGF0dXM6IFRyYW5zYWN0aW9uU3RhdHVzZXMuQ29tcGxldGVkLFxyXG4gIH07XHJcblxyXG4gIHR4bnMucHVzaCh0eCk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdldEFjY291bnRUcmFuc2FjdGlvbnMocGFnZTogUGFnZSk6IFByb21pc2U8VHJhbnNhY3Rpb25bXT4ge1xyXG4gIC8vIFdhaXQgZm9yIHRyYW5zYWN0aW9ucy5cclxuICBhd2FpdCB3YWl0VW50aWxFbGVtZW50Rm91bmQocGFnZSwgJy51bmRlci1saW5lLXR4bi10YWJsZS1oZWFkZXInLCB0cnVlKTtcclxuXHJcbiAgY29uc3QgdHhuczogU2NyYXBlZFRyYW5zYWN0aW9uW10gPSBbXTtcclxuICBjb25zdCB0cmFuc2FjdGlvbnNEaXZzID0gYXdhaXQgcGFnZUV2YWxBbGw8VHJhbnNhY3Rpb25zVHJbXT4oXHJcbiAgICBwYWdlLFxyXG4gICAgJy5saXN0LWl0ZW0taG9sZGVyIC5lbnRpcmUtY29udGVudC1jdHInLFxyXG4gICAgW10sXHJcbiAgICBkaXZzID0+IHtcclxuICAgICAgcmV0dXJuIChkaXZzIGFzIEhUTUxFbGVtZW50W10pLm1hcChkaXYgPT4gKHtcclxuICAgICAgICBpZDogZGl2LmdldEF0dHJpYnV0ZSgnaWQnKSB8fCAnJyxcclxuICAgICAgICBpbm5lckRpdnM6IEFycmF5LmZyb20oZGl2LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdkaXYnKSkubWFwKGVsID0+IChlbCBhcyBIVE1MRWxlbWVudCkuaW5uZXJUZXh0KSxcclxuICAgICAgfSkpO1xyXG4gICAgfSxcclxuICApO1xyXG5cclxuICBmb3IgKGNvbnN0IHR4blJvdyBvZiB0cmFuc2FjdGlvbnNEaXZzKSB7XHJcbiAgICBoYW5kbGVUcmFuc2FjdGlvblJvdyh0eG5zLCB0eG5Sb3cpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGNvbnZlcnRUcmFuc2FjdGlvbnModHhucyk7XHJcbn1cclxuXHJcbi8vIE1hbmlwdWxhdGUgdGhlIGNhbGVuZGFyIGRyb3AgZG93biB0byBjaG9vc2UgdGhlIHR4cyBzdGFydCBkYXRlLlxyXG5hc3luYyBmdW5jdGlvbiBzZWFyY2hCeURhdGVzKHBhZ2U6IFBhZ2UsIHN0YXJ0RGF0ZTogTW9tZW50KSB7XHJcbiAgLy8gR2V0IHRoZSBkYXkgbnVtYmVyIGZyb20gc3RhcnREYXRlLiAxLTMxICh1c3VhbGx5IDEpXHJcbiAgY29uc3Qgc3RhcnREYXRlRGF5ID0gc3RhcnREYXRlLmZvcm1hdCgnRCcpO1xyXG4gIGNvbnN0IHN0YXJ0RGF0ZU1vbnRoID0gc3RhcnREYXRlLmZvcm1hdCgnTScpO1xyXG4gIGNvbnN0IHN0YXJ0RGF0ZVllYXIgPSBzdGFydERhdGUuZm9ybWF0KCdZJyk7XHJcblxyXG4gIC8vIE9wZW4gdGhlIGNhbGVuZGFyIGRhdGUgcGlja2VyXHJcbiAgY29uc3QgZGF0ZUZyb21QaWNrID1cclxuICAgICdkaXYuZGF0ZS1vcHRpb25zLWNlbGw6bnRoLWNoaWxkKDcpID4gZGF0ZS1waWNrZXI6bnRoLWNoaWxkKDEpID4gZGl2Om50aC1jaGlsZCgxKSA+IHNwYW46bnRoLWNoaWxkKDIpJztcclxuICBhd2FpdCB3YWl0VW50aWxFbGVtZW50Rm91bmQocGFnZSwgZGF0ZUZyb21QaWNrLCB0cnVlKTtcclxuICBhd2FpdCBjbGlja0J1dHRvbihwYWdlLCBkYXRlRnJvbVBpY2spO1xyXG5cclxuICAvLyBXYWl0IHVudGlsIGZpcnN0IGRheSBhcHBlYXIuXHJcbiAgYXdhaXQgd2FpdFVudGlsRWxlbWVudEZvdW5kKHBhZ2UsICcucG11LWRheXMgPiBkaXY6bnRoLWNoaWxkKDEpJywgdHJ1ZSk7XHJcblxyXG4gIC8vIE9wZW4gTW9udGhzIG9wdGlvbnMuXHJcbiAgY29uc3QgbW9udGhGcm9tUGljayA9ICcucG11LW1vbnRoJztcclxuICBhd2FpdCB3YWl0VW50aWxFbGVtZW50Rm91bmQocGFnZSwgbW9udGhGcm9tUGljaywgdHJ1ZSk7XHJcbiAgYXdhaXQgY2xpY2tCdXR0b24ocGFnZSwgbW9udGhGcm9tUGljayk7XHJcbiAgYXdhaXQgd2FpdFVudGlsRWxlbWVudEZvdW5kKHBhZ2UsICcucG11LW1vbnRocyA+IGRpdjpudGgtY2hpbGQoMSknLCB0cnVlKTtcclxuXHJcbiAgLy8gT3BlbiBZZWFyIG9wdGlvbnMuXHJcbiAgLy8gVXNlIHNhbWUgc2VsZWN0b3IuLi4gWWFoYXYga25vd3Mgd2h5Li4uXHJcbiAgYXdhaXQgd2FpdFVudGlsRWxlbWVudEZvdW5kKHBhZ2UsIG1vbnRoRnJvbVBpY2ssIHRydWUpO1xyXG4gIGF3YWl0IGNsaWNrQnV0dG9uKHBhZ2UsIG1vbnRoRnJvbVBpY2spO1xyXG4gIGF3YWl0IHdhaXRVbnRpbEVsZW1lbnRGb3VuZChwYWdlLCAnLnBtdS15ZWFycyA+IGRpdjpudGgtY2hpbGQoMSknLCB0cnVlKTtcclxuXHJcbiAgLy8gU2VsZWN0IHllYXIgZnJvbSBhIDEyIHllYXIgZ3JpZC5cclxuICBmb3IgKGxldCBpID0gMTsgaSA8IDEzOyBpICs9IDEpIHtcclxuICAgIGNvbnN0IHNlbGVjdG9yID0gYC5wbXUteWVhcnMgPiBkaXY6bnRoLWNoaWxkKCR7aX0pYDtcclxuICAgIGNvbnN0IHllYXIgPSBhd2FpdCBwYWdlLiRldmFsKHNlbGVjdG9yLCB5ID0+IHtcclxuICAgICAgcmV0dXJuICh5IGFzIEhUTUxFbGVtZW50KS5pbm5lclRleHQ7XHJcbiAgICB9KTtcclxuICAgIGlmIChzdGFydERhdGVZZWFyID09PSB5ZWFyKSB7XHJcbiAgICAgIGF3YWl0IGNsaWNrQnV0dG9uKHBhZ2UsIHNlbGVjdG9yKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBTZWxlY3QgTW9udGguXHJcbiAgYXdhaXQgd2FpdFVudGlsRWxlbWVudEZvdW5kKHBhZ2UsICcucG11LW1vbnRocyA+IGRpdjpudGgtY2hpbGQoMSknLCB0cnVlKTtcclxuICAvLyBUaGUgZmlyc3QgZWxlbWVudCAoMSkgaXMgSmFudWFyeS5cclxuICBjb25zdCBtb250aFNlbGVjdG9yID0gYC5wbXUtbW9udGhzID4gZGl2Om50aC1jaGlsZCgke3N0YXJ0RGF0ZU1vbnRofSlgO1xyXG4gIGF3YWl0IGNsaWNrQnV0dG9uKHBhZ2UsIG1vbnRoU2VsZWN0b3IpO1xyXG5cclxuICAvLyBTZWxlY3QgRGF5LlxyXG4gIC8vIFRoZSBjYWxlbmRhciBncmlkIHNob3dzIDcgZGF5cyBhbmQgNiB3ZWVrcyA9IDQyIGRheXMuXHJcbiAgLy8gSW4gdGhlb3J5LCB0aGUgZmlyc3QgZGF5IG9mIHRoZSBtb250aCB3aWxsIGJlIGluIHRoZSBmaXJzdCByb3cuXHJcbiAgLy8gTGV0J3MgY2hlY2sgZXZlcnl0aGluZyBqdXN0IGluIGNhc2UuLi5cclxuICBmb3IgKGxldCBpID0gMTsgaSA8IDQyOyBpICs9IDEpIHtcclxuICAgIGNvbnN0IHNlbGVjdG9yID0gYC5wbXUtZGF5cyA+IGRpdjpudGgtY2hpbGQoJHtpfSlgO1xyXG4gICAgY29uc3QgZGF5ID0gYXdhaXQgcGFnZS4kZXZhbChzZWxlY3RvciwgZCA9PiB7XHJcbiAgICAgIHJldHVybiAoZCBhcyBIVE1MRWxlbWVudCkuaW5uZXJUZXh0O1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKHN0YXJ0RGF0ZURheSA9PT0gZGF5KSB7XHJcbiAgICAgIGF3YWl0IGNsaWNrQnV0dG9uKHBhZ2UsIHNlbGVjdG9yKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBmZXRjaEFjY291bnREYXRhKHBhZ2U6IFBhZ2UsIHN0YXJ0RGF0ZTogTW9tZW50LCBhY2NvdW50SUQ6IHN0cmluZyk6IFByb21pc2U8VHJhbnNhY3Rpb25zQWNjb3VudD4ge1xyXG4gIGF3YWl0IHdhaXRVbnRpbEVsZW1lbnREaXNhcHBlYXIocGFnZSwgJy5sb2FkaW5nLWJhci1zcGlubmVyJyk7XHJcbiAgYXdhaXQgc2VhcmNoQnlEYXRlcyhwYWdlLCBzdGFydERhdGUpO1xyXG4gIGF3YWl0IHdhaXRVbnRpbEVsZW1lbnREaXNhcHBlYXIocGFnZSwgJy5sb2FkaW5nLWJhci1zcGlubmVyJyk7XHJcbiAgY29uc3QgdHhucyA9IGF3YWl0IGdldEFjY291bnRUcmFuc2FjdGlvbnMocGFnZSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBhY2NvdW50TnVtYmVyOiBhY2NvdW50SUQsXHJcbiAgICB0eG5zLFxyXG4gIH07XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoQWNjb3VudHMocGFnZTogUGFnZSwgc3RhcnREYXRlOiBNb21lbnQpOiBQcm9taXNlPFRyYW5zYWN0aW9uc0FjY291bnRbXT4ge1xyXG4gIGNvbnN0IGFjY291bnRzOiBUcmFuc2FjdGlvbnNBY2NvdW50W10gPSBbXTtcclxuXHJcbiAgLy8gVE9ETzogZ2V0IG1vcmUgYWNjb3VudHMuIE5vdCBzdXJlIGlzIHN1cHBvcnRlZC5cclxuICBjb25zdCBhY2NvdW50SUQgPSBhd2FpdCBnZXRBY2NvdW50SUQocGFnZSk7XHJcbiAgY29uc3QgYWNjb3VudERhdGEgPSBhd2FpdCBmZXRjaEFjY291bnREYXRhKHBhZ2UsIHN0YXJ0RGF0ZSwgYWNjb3VudElEKTtcclxuICBhY2NvdW50cy5wdXNoKGFjY291bnREYXRhKTtcclxuXHJcbiAgcmV0dXJuIGFjY291bnRzO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiB3YWl0UmVhZGluZXNzRm9yQWxsKHBhZ2U6IFBhZ2UpIHtcclxuICBhd2FpdCB3YWl0VW50aWxFbGVtZW50Rm91bmQocGFnZSwgYCR7VVNFUl9FTEVNfWAsIHRydWUpO1xyXG4gIGF3YWl0IHdhaXRVbnRpbEVsZW1lbnRGb3VuZChwYWdlLCBgJHtQQVNTV0RfRUxFTX1gLCB0cnVlKTtcclxuICBhd2FpdCB3YWl0VW50aWxFbGVtZW50Rm91bmQocGFnZSwgYCR7TkFUSU9OQUxJRF9FTEVNfWAsIHRydWUpO1xyXG4gIGF3YWl0IHdhaXRVbnRpbEVsZW1lbnRGb3VuZChwYWdlLCBgJHtTVUJNSVRfTE9HSU5fU0VMRUNUT1J9YCwgdHJ1ZSk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHJlZGlyZWN0T3JEaWFsb2cocGFnZTogUGFnZSkge1xyXG4gIC8vIENsaWNrIG9uIGJhbmsgbWVzc2FnZXMgaWYgYW55LlxyXG4gIGF3YWl0IHdhaXRGb3JOYXZpZ2F0aW9uKHBhZ2UpO1xyXG4gIGF3YWl0IHdhaXRVbnRpbEVsZW1lbnREaXNhcHBlYXIocGFnZSwgJy5sb2FkaW5nLWJhci1zcGlubmVyJyk7XHJcbiAgY29uc3QgaGFzTWVzc2FnZSA9IGF3YWl0IGVsZW1lbnRQcmVzZW50T25QYWdlKHBhZ2UsICcubWVzc2FnaW5nLWxpbmtzLWNvbnRhaW5lcicpO1xyXG4gIGlmIChoYXNNZXNzYWdlKSB7XHJcbiAgICBhd2FpdCBjbGlja0J1dHRvbihwYWdlLCAnLmxpbmstMScpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgcHJvbWlzZTEgPSBwYWdlLndhaXRGb3JTZWxlY3RvcihBQ0NPVU5UX0RFVEFJTFNfU0VMRUNUT1IsIHsgdGltZW91dDogMzAwMDAgfSk7XHJcbiAgY29uc3QgcHJvbWlzZTIgPSBwYWdlLndhaXRGb3JTZWxlY3RvcihDSEFOR0VfUEFTU1dPUkRfT0xEX1BBU1MsIHsgdGltZW91dDogMzAwMDAgfSk7XHJcbiAgY29uc3QgcHJvbWlzZXMgPSBbcHJvbWlzZTEsIHByb21pc2UyXTtcclxuXHJcbiAgYXdhaXQgUHJvbWlzZS5yYWNlKHByb21pc2VzKTtcclxuICBhd2FpdCB3YWl0VW50aWxFbGVtZW50RGlzYXBwZWFyKHBhZ2UsICcubG9hZGluZy1iYXItc3Bpbm5lcicpO1xyXG59XHJcblxyXG50eXBlIFNjcmFwZXJTcGVjaWZpY0NyZWRlbnRpYWxzID0geyB1c2VybmFtZTogc3RyaW5nOyBwYXNzd29yZDogc3RyaW5nOyBuYXRpb25hbElEOiBzdHJpbmcgfTtcclxuXHJcbmNsYXNzIFlhaGF2U2NyYXBlciBleHRlbmRzIEJhc2VTY3JhcGVyV2l0aEJyb3dzZXI8U2NyYXBlclNwZWNpZmljQ3JlZGVudGlhbHM+IHtcclxuICBnZXRMb2dpbk9wdGlvbnMoY3JlZGVudGlhbHM6IFNjcmFwZXJTcGVjaWZpY0NyZWRlbnRpYWxzKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBsb2dpblVybDogYCR7TE9HSU5fVVJMfWAsXHJcbiAgICAgIGZpZWxkczogW1xyXG4gICAgICAgIHsgc2VsZWN0b3I6IGAke1VTRVJfRUxFTX1gLCB2YWx1ZTogY3JlZGVudGlhbHMudXNlcm5hbWUgfSxcclxuICAgICAgICB7IHNlbGVjdG9yOiBgJHtQQVNTV0RfRUxFTX1gLCB2YWx1ZTogY3JlZGVudGlhbHMucGFzc3dvcmQgfSxcclxuICAgICAgICB7IHNlbGVjdG9yOiBgJHtOQVRJT05BTElEX0VMRU19YCwgdmFsdWU6IGNyZWRlbnRpYWxzLm5hdGlvbmFsSUQgfSxcclxuICAgICAgXSxcclxuICAgICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IGAke1NVQk1JVF9MT0dJTl9TRUxFQ1RPUn1gLFxyXG4gICAgICBjaGVja1JlYWRpbmVzczogYXN5bmMgKCkgPT4gd2FpdFJlYWRpbmVzc0ZvckFsbCh0aGlzLnBhZ2UpLFxyXG4gICAgICBwb3N0QWN0aW9uOiBhc3luYyAoKSA9PiByZWRpcmVjdE9yRGlhbG9nKHRoaXMucGFnZSksXHJcbiAgICAgIHBvc3NpYmxlUmVzdWx0czogZ2V0UG9zc2libGVMb2dpblJlc3VsdHModGhpcy5wYWdlKSxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBhc3luYyBmZXRjaERhdGEoKSB7XHJcbiAgICAvLyBHb3RvIHN0YXRlbWVudHMgcGFnZVxyXG4gICAgYXdhaXQgd2FpdFVudGlsRWxlbWVudEZvdW5kKHRoaXMucGFnZSwgQUNDT1VOVF9ERVRBSUxTX1NFTEVDVE9SLCB0cnVlKTtcclxuICAgIGF3YWl0IGNsaWNrQnV0dG9uKHRoaXMucGFnZSwgQUNDT1VOVF9ERVRBSUxTX1NFTEVDVE9SKTtcclxuICAgIGF3YWl0IHdhaXRVbnRpbEVsZW1lbnRGb3VuZCh0aGlzLnBhZ2UsICcuc3RhdGVtZW50LW9wdGlvbnMgLnNlbGVjdGVkLWl0ZW0tdG9wJywgdHJ1ZSk7XHJcblxyXG4gICAgY29uc3QgZGVmYXVsdFN0YXJ0TW9tZW50ID0gbW9tZW50KCkuc3VidHJhY3QoMywgJ21vbnRocycpLmFkZCgxLCAnZGF5Jyk7XHJcbiAgICBjb25zdCBzdGFydERhdGUgPSB0aGlzLm9wdGlvbnMuc3RhcnREYXRlIHx8IGRlZmF1bHRTdGFydE1vbWVudC50b0RhdGUoKTtcclxuICAgIGNvbnN0IHN0YXJ0TW9tZW50ID0gbW9tZW50Lm1heChkZWZhdWx0U3RhcnRNb21lbnQsIG1vbWVudChzdGFydERhdGUpKTtcclxuXHJcbiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGZldGNoQWNjb3VudHModGhpcy5wYWdlLCBzdGFydE1vbWVudCk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgYWNjb3VudHMsXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgWWFoYXZTY3JhcGVyO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBLElBQUFDLFVBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLHFCQUFBLEdBQUFGLE9BQUE7QUFPQSxJQUFBRyxXQUFBLEdBQUFILE9BQUE7QUFDQSxJQUFBSSxhQUFBLEdBQUFKLE9BQUE7QUFDQSxJQUFBSyx1QkFBQSxHQUFBTCxPQUFBO0FBQThHLFNBQUFELHVCQUFBTyxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBRTlHLE1BQU1HLFNBQVMsR0FBRyxrQ0FBa0M7QUFDcEQsTUFBTUMsUUFBUSxHQUFHLDZEQUE2RDtBQUM5RSxNQUFNQyx3QkFBd0IsR0FBRyxvQkFBb0I7QUFDckQsTUFBTUMsd0JBQXdCLEdBQUcsdUNB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